name: Metrics
on:
  # Schedule daily updates at midnight
  schedule:
    - cron: "0 0 * * *"
  # Allow manual runs and run on pushes to main branches
  workflow_dispatch:
  push:
    branches:
      - master
      - main

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          # Required GitHub access token
          token: ${{ secrets.METRICS_TOKEN }}

          # Basic profile configuration
          user: amirulandalib
          template: classic
          base: header, activity, community, repositories, metadata
          config_timezone: Pacific/Auckland

          # Music integration — Apple Music playlist (only playlist mode is supported)
          #plugin_music: yes
          #plugin_music_provider: apple
          # Provide an embed URL from your Apple Music playlist here
          #plugin_music_playlist: https://embed.music.apple.com/REGION/playlist/PLAYLIST_ID
          #plugin_music_limit: 5
          #plugin_music_art: yes

          # Achievements
          plugin_achievements: yes
          plugin_achievements_display: detailed
          plugin_achievements_threshold: A
          plugin_achievements_secrets: yes
          plugin_achievements_only_highlighted: yes

          # Activity (recent GitHub events)
          plugin_activity: yes
          plugin_activity_days: 14
          plugin_activity_filter: all
          plugin_activity_limit: 10
          plugin_activity_load: 300
          plugin_activity_timestamps: yes
          plugin_activity_visibility: all

          # Contribution calendar
          plugin_calendar: yes
          plugin_calendar_limit: 5

          # Gists
          plugin_gists: yes

          # Introduction section
          plugin_introduction: yes
          plugin_introduction_title: yes

          # Languages analysis
          plugin_languages: yes
          plugin_languages_colors: github
          plugin_languages_limit: 10
          plugin_languages_threshold: 0%
          plugin_languages_analysis_timeout: 15
          plugin_languages_analysis_timeout_repositories: 7.5
          plugin_languages_categories: markup, programming
          plugin_languages_recent_categories: markup, programming
          plugin_languages_recent_days: 14
          plugin_languages_recent_load: 300
          plugin_languages_sections: most-used

          # Lines of code changed
          plugin_lines: yes
          plugin_lines_history_limit: 40
          plugin_lines_repositories_limit: 10
          plugin_lines_sections: base

          # Habits
          plugin_habits: yes
          plugin_habits_days: 30
          plugin_habits_charts: yes
          plugin_habits_charts_type: pie
          plugin_habits_facts: yes
          plugin_habits_from: 200
          plugin_habits_languages_limit: 10
          plugin_habits_languages_threshold: 0
          plugin_habits_trim: no

          # WakaTime statistics
          plugin_wakatime: yes
          plugin_wakatime_token: ${{ secrets.WAKATIME_TOKEN }}
          plugin_wakatime_user: current
          plugin_wakatime_url: https://wakatime.com
          plugin_wakatime_days: 365
          plugin_wakatime_languages_other: yes
          plugin_wakatime_limit: 10
          plugin_wakatime_sections: time, projects, projects-graphs, languages, languages-graphs, editors, os

          # 3D GitHub skyline
          plugin_skyline: yes
          plugin_skyline_year: ${{ secrets.SKYLINE_YEAR }}
          plugin_skyline_frames: 30
          plugin_skyline_quality: 2
          plugin_skyline_settings: |
            {
              "url": "https://skyline.github.com/${login}/${year}",
              "ready": "[...document.querySelectorAll('span')].map(span => span.innerText).includes('Share on Twitter')",
              "wait": 1,
              "hide": "button, footer, a"
            }

          # Stargazers
          plugin_stargazers: yes
          plugin_stargazers_charts: yes
          plugin_stargazers_charts_type: graph
          plugin_stargazers_days: 14
          plugin_stargazers_worldmap: yes

          # Star lists
          plugin_starlists: yes
          plugin_starlists_languages: yes
          plugin_starlists_limit: 10
          plugin_starlists_limit_languages: 10
          plugin_starlists_limit_repositories: 10
          plugin_starlists_shuffle_repositories: yes

          # Stars history
          plugin_stars: yes
          plugin_stars_limit: 20

          # Repository topics
          plugin_topics: yes
          plugin_topics_limit: 20
          plugin_topics_sort: stars
          plugin_topics_mode: icons

          # Traffic insights
          plugin_traffic: yes
          plugin_traffic_views: detailed
          plugin_traffic_unique: yes
          plugin_traffic_worldmap: yes

          # Projects overview
          plugin_projects: yes
          plugin_projects_descriptions: yes
          plugin_projects_limit: 10

          # People (followers and following)
          plugin_people: yes
          plugin_people_limit: 24
          plugin_people_shuffle: yes
          plugin_people_size: 28
          plugin_people_types: followers, following

          # Notable contributions
          plugin_notable: yes
          plugin_notable_from: all
          plugin_notable_indepth: yes
          plugin_notable_repositories: yes
          plugin_notable_self: yes
          plugin_notable_types: commit

          # Follow‑up for issues and pull requests
          plugin_followup: yes
          plugin_followup_archived: yes
          plugin_followup_indepth: yes
          plugin_followup_sections: repositories

          # Isometric commit calendar
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # Repository licenses
          plugin_licenses: yes

          # Comment reactions
          plugin_reactions: yes

          # Repository contributors
          plugin_contributors: yes

          # Discussions
          plugin_discussions: yes

          # Random code snippets (may show private code—enable with caution)
          plugin_code: yes
          plugin_code_languages: javascript, typescript, python, c, java
          plugin_code_lines: 12
          plugin_code_load: 400
          plugin_code_days: 3
          plugin_code_visibility: public

          # Featured repositories and diff history
          plugin_repositories: yes
          plugin_repositories_pinned: yes
          plugin_repositories_featured: yes
          plugin_repositories_affiliations: owner, collaborator
          plugin_repositories_forks: yes
          plugin_repositories_limit: 10
          plugin_repositories_sort: stars
          plugin_repositories_descriptions: yes

          # Sponsors information
          plugin_sponsors: yes
          plugin_sponsors_sections: goal, list
          plugin_sponsors_past: yes
          plugin_sponsors_user: amirulandalib

          # Sponsorships
          plugin_sponsorships: yes
          plugin_sponsorships_sections: current
          plugin_sponsorships_past: yes

          # AniList (anime and manga)
          #plugin_anilist: yes
          #plugin_anilist_user: your_anilist_username
          #plugin_anilist_medias: anime, manga
          #plugin_anilist_sections: favorites, watching, reading, characters
          #plugin_anilist_limit: 5
          #plugin_anilist_limit_characters: 10
          #plugin_anilist_shuffle: yes

          # LeetCode statistics
          #plugin_leetcode: yes
          #plugin_leetcode_user: amirulandalib
          #plugin_leetcode_sections: solved, ranking
          #plugin_leetcode_limit: 5

          # Steam Plugin
          plugin_steam: yes
          plugin_steam_token: ${{ secrets.STEAM_TOKEN }}
          plugin_steam_user: AmirulAndalib
          plugin_steam_sections: profile, recently-played
          plugin_steam_games_limit: 5
          plugin_steam_playtime_threshold: 0
          plugin_steam_achievements: yes
          plugin_steam_days: 14
          plugin_steam_recent_games: yes
          plugin_steam_played_total: yes
          plugin_steam_display_games: detailed

          # Stack Overflow profile
          plugin_stackoverflow: yes
          plugin_stackoverflow_user: 15605896
          plugin_stackoverflow_sections: reputation, answers, questions
          plugin_stackoverflow_limit: 5

          # RSS feed
          #plugin_rss: yes
          #plugin_rss_source: https://example.com/feed.xml
          #plugin_rss_limit: 5
          #plugin_rss_sections: description, categories
          #plugin_rss_pub_date_format: relative

          # Recent blog posts (Dev.to or Medium)
          plugin_posts: yes
          plugin_posts_source: dev.to
          plugin_posts_user: amirulandalib
          plugin_posts_limit: 5
          plugin_posts_descriptions: yes
          plugin_posts_covers: yes
          plugin_posts_load: 300
          plugin_posts_hide_comments: no
          plugin_posts_resume: no

          # Google PageSpeed Insights
          #plugin_pagespeed: yes
          #plugin_pagespeed_detailed: yes
          #plugin_pagespeed_url: https://example.com
          #plugin_pagespeed_pwa: yes
          #plugin_pagespeed_screenshot: yes
          #plugin_pagespeed_threshold: good

          # 16personalities (community plugin)
          #plugin_16personalities: yes
          #plugin_16personalities_type: your_personality_type

          # Chess statistics (community plugin)
          #plugin_chess: yes
          #plugin_chess_user: your_chess_username
          #plugin_chess_platform: lichess
          #plugin_chess_limit: 5

          # Crypto prices (community plugin)
          #plugin_crypto: yes
          #plugin_crypto_token: ${{ secrets.CRYPTO_TOKEN }}
          #plugin_crypto_symbol: BTC
          #plugin_crypto_limit: 5

          # Fortune (community plugin)
          plugin_fortune: yes

          # Nightscout (community plugin)
          #plugin_nightscout: yes
          #plugin_nightscout_url: https://your-nightscout-site.example.com
          #plugin_nightscout_units: mmol

          # PoopMap (community plugin)
          #plugin_poopmap: yes
          #plugin_poopmap_user: your_poopmap_username

          # Website screenshot (community plugin)
          #plugin_screenshot: yes
          #plugin_screenshot_title: Your Website
          #plugin_screenshot_url: https://example.com
          #plugin_screenshot_width: 1280
          #plugin_screenshot_height: 720

          # Splatoon (community plugin)
          #plugin_splatoon: yes
          #plugin_splatoon_nickname: your_splatoon_nickname
          #plugin_splatoon_token: ${{ secrets.SPLATOON_TOKEN }}

          # Stock prices (community plugin)
          plugin_stock: yes
          plugin_stock_tickers: AAPL, MSFT, OPENAI, GOOGL, NVDA, 000660.KS, 005930.KS, HMC, TM
          plugin_stock_duration: 1mo
          plugin_stock_interval: 1d

          # Website screenshot (alias for screenshot plugin)
          #plugin_website_screenshot: yes
          #plugin_website_screenshot_url: https://example.com
          #plugin_website_screenshot_refresh: daily

